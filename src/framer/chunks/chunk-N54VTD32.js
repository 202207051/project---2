// @ts-nocheck
/* eslint-disable */
/* This file was generated by Unframer for Framer project 3759d569955c51a9 "Perform (copy)", do not edit manually */
// /:https://framerusercontent.com/modules/3kSszCA7P49KbVg8UUZO/az74tUcCfmlybn1qRLo4/Calcom.js
import { jsx as _jsx } from "react/jsx-runtime";
import { addPropertyControls, ControlType } from "unframer";
import Cal, { getCalApi } from "@calcom/embed-react";
import { useState, useEffect } from "react";
import { RenderTarget } from "unframer";
function Calcom(props) {
  const { layout, eventLink, darkTheme, lightTheme, theme, showEventTypeDetails, namespace = "" } = props;
  const [error, setError] = useState();
  const [embedInfo, setEmbedInfo] = useState({ origin: "", username: "", eventTypeSlug: "", namespace: "", teamEventTypeSlug: "" });
  const isOnCavas = RenderTarget.current() === RenderTarget.canvas;
  let _namespace = namespace === "" && embedInfo.namespace === "" ? `uniqueId-${Math.floor(Math.random() * 1e3)}` : namespace !== "" ? namespace : embedInfo.namespace;
  useEffect(() => {
    (async function() {
      let url = null;
      let normalizedLink = eventLink?.trim() || "";
      if (!/^https?:\/\//i.test(normalizedLink)) {
        normalizedLink = "https://" + normalizedLink;
      }
      try {
        url = new URL(normalizedLink?.trim());
      } catch (err) {
        console.error(`Incorrect URL: ${eventLink?.trim()} 
`, err);
        alert(`Incorrect URL: ${eventLink?.trim()} `);
        url = null;
        return;
      }
      const origin = url.origin;
      const [username, eventTypeSlug = "", teamEventTypeSlug = ""] = url.pathname.slice(1).split("/");
      if (!username) {
        console.error("URL must include at least username.");
        alert(`URL must include at least username.`);
        return;
      }
      setEmbedInfo((prev) => ({ ...prev, origin, username, eventTypeSlug, namespace: _namespace, teamEventTypeSlug }));
      const cal = await getCalApi({ namespace: _namespace });
      cal("ui", { cssVarsPerTheme: { light: { "cal-brand": lightTheme }, dark: { "cal-brand": darkTheme } }, hideEventTypeDetails: !showEventTypeDetails, layout, theme });
    })();
  }, [eventLink, layout, lightTheme, darkTheme, theme, showEventTypeDetails]);
  let calLink = `${embedInfo.username}/${embedInfo.eventTypeSlug}`;
  if (embedInfo.teamEventTypeSlug.trim() !== "") {
    calLink += `/${embedInfo.teamEventTypeSlug}`;
  }
  return /* @__PURE__ */ _jsx(Cal, { namespace: _namespace, calLink, style: isOnCavas ? { height: "100%", overflow: "clip" } : { width: "100%", height: "100%", overflow: "scroll" }, config: { layout, theme }, calOrigin: embedInfo.origin }, `${eventLink}-${_namespace}`);
}
addPropertyControls(Calcom, { eventLink: { title: "Event Link", type: ControlType.String, defaultValue: "https://cal.com/framer-placeholder/default" }, theme: { type: ControlType.Enum, options: ["auto", "light", "dark"], optionTitles: ["Auto", "Light", "Dark"], defaultValue: "auto" }, lightTheme: { type: ControlType.Color, defaultValue: "#292929", title: "Light Color" }, darkTheme: { type: ControlType.Color, defaultValue: "#fafafa", title: "Dark Color" }, showEventTypeDetails: { type: ControlType.Enum, title: "Event Info", defaultValue: true, displaySegmentedControl: true, segmentedControlDirection: "horizontal", options: [true, false], optionTitles: ["Show", "Hide"] }, layout: { type: ControlType.Enum, options: ["month_view", "column_view", "week_view"], optionTitles: ["Month View", "Column View", "Week View"], defaultValue: "month_view" } });
Calcom.displayName = "Cal.com";

export {
  Calcom
};
