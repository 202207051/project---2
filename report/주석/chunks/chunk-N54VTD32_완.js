// @ts-nocheck
/* eslint-disable */
/* This file was generated by Unframer for Framer project 3759d569955c51a9 "Perform (copy)", do not edit manually */

// /:https://framerusercontent.com/modules/3kSszCA7P49KbVg8UUZO/az74tUcCfmlybn1qRLo4/Calcom.js
// Cal.com 임베딩을 위한 Framer 컴포넌트

import { jsx as _jsx } from "react/jsx-runtime";
import { addPropertyControls, ControlType } from "unframer";
// Framer의 컴포넌트 속성(props) 제어 및 타입 정의 유틸리티를 가져옵니다.

import Cal, { getCalApi } from "@calcom/embed-react";
// Cal.com의 공식 React 임베드 컴포넌트(Cal)와 API 로더 함수(getCalApi)를 가져옵니다.

import { useState, useEffect } from "react";
import { RenderTarget } from "unframer";
// React 훅 및 Framer의 렌더링 환경 확인 유틸리티를 가져옵니다.

function Calcom(props) {
// 메인 Cal.com Framer 컴포넌트 정의 시작

  const { layout, eventLink, darkTheme, lightTheme, theme, showEventTypeDetails, namespace = "" } = props;
// 컴포넌트 속성(props)을 분해합니다.
// - layout: 달력의 보기 방식 (월별, 주별, 컬럼별)
// - eventLink: Cal.com 예약 이벤트 URL
// - darkTheme/lightTheme: 테마에 사용될 색상 변수
// - theme: 자동, 라이트, 다크 모드 선택
// - showEventTypeDetails: 이벤트 상세 정보 표시 여부
// - namespace: Cal.com 임베드 인스턴스를 구분하기 위한 고유 네임스페이스 (선택 사항)

  const [error, setError] = useState();
// 오류 상태를 저장합니다.

  const [embedInfo, setEmbedInfo] = useState({ origin: "", username: "", eventTypeSlug: "", namespace: "", teamEventTypeSlug: "" });
// Cal.com URL에서 추출한 정보를 저장하는 상태입니다. (도메인, 사용자 이름, 이벤트 슬러그 등)

  const isOnCavas = RenderTarget.current() === RenderTarget.canvas;
// 현재 Framer 캔버스 에디터에서 렌더링 중인지 확인합니다.

  let _namespace = namespace === "" && embedInfo.namespace === "" ? `uniqueId-${Math.floor(Math.random() * 1e3)}` : namespace !== "" ? namespace : embedInfo.namespace;
// 네임스페이스를 결정합니다. props로 제공되지 않고 상태에도 없다면, 고유한 ID를 생성합니다.

  useEffect(() => {
// 컴포넌트가 마운트되거나 의존성(props)이 변경될 때 실행되는 훅입니다.
    (async function() {
      let url = null;
      let normalizedLink = eventLink?.trim() || "";

      if (!/^https?:\/\//i.test(normalizedLink)) {
        normalizedLink = "https://" + normalizedLink;
      }
// URL에 'http://' 또는 'https://'가 없으면 자동으로 'https://'를 추가합니다.

      try {
        url = new URL(normalizedLink?.trim());
      } catch (err) {
        console.error(`Incorrect URL: ${eventLink?.trim()} 
`, err);
        alert(`Incorrect URL: ${eventLink?.trim()} `);
        url = null;
        return;
      }
// URL 유효성을 검사합니다. 유효하지 않으면 오류를 출력하고 함수를 종료합니다.

      const origin = url.origin;
      const [username, eventTypeSlug = "", teamEventTypeSlug = ""] = url.pathname.slice(1).split("/");
// URL 경로(`pathname`)에서 선행 '/'를 제거하고 슬래시('/'s)를 기준으로 분할하여
// 사용자 이름(username), 이벤트 타입 슬러그(eventTypeSlug), 팀 이벤트 슬러그(teamEventTypeSlug)를 추출합니다.

      if (!username) {
        console.error("URL must include at least username.");
        alert(`URL must include at least username.`);
        return;
      }
// 최소한 사용자 이름은 포함되어야 함을 검증합니다.

      setEmbedInfo((prev) => ({ ...prev, origin, username, eventTypeSlug, namespace: _namespace, teamEventTypeSlug }));
// 추출된 URL 정보를 상태에 저장합니다.

      const cal = await getCalApi({ namespace: _namespace });
// Cal.com 임베드 API를 비동기적으로 로드합니다. 네임스페이스를 지정하여 충돌을 방지합니다.

      cal("ui", { cssVarsPerTheme: { light: { "cal-brand": lightTheme }, dark: { "cal-brand": darkTheme } }, hideEventTypeDetails: !showEventTypeDetails, layout, theme });
// Cal.com 임베드 API의 'ui' 명령어를 사용하여 임베드 UI 설정을 적용합니다.
// - `cssVarsPerTheme`: 라이트/다크 테마에 따라 브랜드 색상(`cal-brand`)을 설정합니다.
// - `hideEventTypeDetails`: 이벤트 상세 정보 표시 여부를 설정합니다.
// - `layout`, `theme`: 레이아웃과 전체 테마 모드를 설정합니다.

    })();
  }, [eventLink, layout, lightTheme, darkTheme, theme, showEventTypeDetails]);
// 의존성 배열: eventLink나 UI 관련 props가 변경되면 useEffect가 다시 실행되어 임베드 설정을 업데이트합니다.

  let calLink = `${embedInfo.username}/${embedInfo.eventTypeSlug}`;
// Cal 컴포넌트에 전달할 Cal.com 링크 경로를 구성합니다. (username/eventSlug)

  if (embedInfo.teamEventTypeSlug.trim() !== "") {
    calLink += `/${embedInfo.teamEventTypeSlug}`;
  }
// 팀 이벤트 슬러그가 있다면 경로에 추가합니다.

  return /* @__PURE__ */ _jsx(Cal, { namespace: _namespace, calLink, style: isOnCavas ? { height: "100%", overflow: "clip" } : { width: "100%", height: "100%", overflow: "scroll" }, config: { layout, theme }, calOrigin: embedInfo.origin }, `${eventLink}-${_namespace}`);
// Cal.com의 React 컴포넌트(Cal)를 렌더링합니다.
// - `namespace`: 고유 네임스페이스
// - `calLink`: 구성된 이벤트 경로
// - `style`: 캔버스(Framer 에디터)와 실제 뷰포트에서 다른 `overflow` 속성을 적용합니다.
// - `config`: 레이아웃과 테마를 전달합니다.
// - `calOrigin`: 추출된 Cal.com의 오리진(도메인)을 전달합니다.

}

addPropertyControls(Calcom, { eventLink: { title: "Event Link", type: ControlType.String, defaultValue: "https://cal.com/framer-placeholder/default" }, theme: { type: ControlType.Enum, options: ["auto", "light", "dark"], optionTitles: ["Auto", "Light", "Dark"], defaultValue: "auto" }, lightTheme: { type: ControlType.Color, defaultValue: "#292929", title: "Light Color" }, darkTheme: { type: ControlType.Color, defaultValue: "#fafafa", title: "Dark Color" }, showEventTypeDetails: { type: ControlType.Enum, title: "Event Info", defaultValue: true, displaySegmentedControl: true, segmentedControlDirection: "horizontal", options: [true, false], optionTitles: ["Show", "Hide"] }, layout: { type: ControlType.Enum, options: ["month_view", "column_view", "week_view"], optionTitles: ["Month View", "Column View", "Week View"], defaultValue: "month_view" } });
// Framer UI에서 컴포넌트 속성을 편집할 수 있도록 Property Controls를 정의합니다.

Calcom.displayName = "Cal.com";

export {
  Calcom
};